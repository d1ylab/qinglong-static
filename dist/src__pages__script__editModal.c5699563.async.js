"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5586],{90300:function(oe,y,e){e.r(y);var I=e(57213),E=e.n(I),v=e(54306),r=e.n(v),a=e(63313),V=e.n(a),f=e(28756),j=e(60858),D=e(75310),P=e(24378),u=e(35911),h=e(90717),b=e(36035),i=e(82755),p=e(98609),g=e(75035),l=e(74445),L=e(60001),n=e(11527),M=f.Z.Option,o={".py":"python",".js":"javascript",".sh":"shell",".ts":"typescript"},m={python:".py",javascript:".js",shell:".sh",typescript:".ts"},_=function(t){var d=t.treeData,R=t.currentNode,F=t.content,w=t.handleCancel,W=t.visible,Z=t.socketMessage,N=(0,a.useState)(""),C=r()(N,2),H=C[0],S=C[1],q=(0,a.useState)("javascript"),A=r()(q,2),z=A[0],x=A[1],G=(0,a.useState)(),le=r()(G,2),U=le[0],$=le[1],X=(0,a.useState)(""),se=r()(X,2),ae=se[0],re=se[1],J=(0,a.useState)(!1),ie=r()(J,2),Oe=ie[0],de=ie[1],B=(0,a.useState)(!1),ue=r()(B,2),me=ue[0],ce=ue[1],De=(0,a.useState)(""),Q=r()(De,2),ee=Q[0],te=Q[1],ne=(0,l.F)(),Pe=ne.theme,Y=(0,a.useRef)(null),ge=(0,a.useState)(!1),Ee=r()(ge,2),ve=Ee[0],k=Ee[1],_e=(0,a.useState)(null),fe=r()(_e,2),he=fe[0],Ce=fe[1],Ie=function(){w()},Te=function(s,O){if(!(O.key===ae||!s)&&O.type!=="directory"){var K=o[s.slice(-3)]||"";$(O),x(K),ye(O),re(O.key)}},ye=function(s){u.W.get("".concat(h.Z.apiPrefix,"scripts/").concat(s.title,"?path=").concat(s.parent||"")).then(function(O){var K=O.code,Re=O.data;K===200&&S(Re)})},pe=function(){te("");var s=Y.current.getValue().replace(/\r\n/g,`
`);u.W.put("".concat(h.Z.apiPrefix,"scripts/run"),{data:{filename:U.title,path:U.parent||"",content:s}}).then(function(O){var K=O.code,Re=O.data;K===200&&(k(!0),Ce(Re))})},Me=function(){!U||!U.title||!he||u.W.put("".concat(h.Z.apiPrefix,"scripts/stop"),{data:{filename:U.title,path:U.parent||"",pid:he}}).then(function(s){var O=s.code,K=s.data;O===200&&k(!1)})};return(0,a.useEffect)(function(){if(Z){var c=Z.type,s=Z.message,O=Z.references;c==="manuallyRunScript"&&((0,L.x$)(s)&&setTimeout(function(){k(!1)},300),ee&&(s=`
`.concat(s)),te("".concat(ee).concat(s)))}},[Z]),(0,a.useEffect)(function(){if(te(""),R){$(R),S(F),re(R.key);var c=o[R.title.slice(-3)]||"";x(c)}},[F,R]),(0,n.jsxs)(j.Z,{className:"edit-modal",closable:!1,title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{treeExpandAction:"click",style:{marginRight:8,width:150},value:ae,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:d,placeholder:"\u8BF7\u9009\u62E9\u811A\u672C\u6587\u4EF6",fieldNames:{value:"key",label:"title"},showSearch:!0,onSelect:Te}),(0,n.jsxs)(f.Z,{value:z,style:{width:110,marginRight:8},onChange:function(s){x(s)},children:[(0,n.jsx)(M,{value:"javascript",children:"javascript"}),(0,n.jsx)(M,{value:"typescript",children:"typescript"}),(0,n.jsx)(M,{value:"shell",children:"shell"}),(0,n.jsx)(M,{value:"python",children:"python"})]}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:ve?Me:pe,children:ve?"\u505C\u6B62":"\u8FD0\u884C"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){te("")},children:"\u6E05\u7A7A\u65E5\u5FD7"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){ce(!0)},children:"\u8BBE\u7F6E"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){de(!0)},children:"\u4FDD\u5B58"}),(0,n.jsx)(P.Z,{type:"primary",style:{marginRight:8},onClick:function(){Me(),w()},children:"\u9000\u51FA"})]}),width:"100%",headerStyle:{padding:"11px 24px"},onClose:Ie,open:W,children:[(0,n.jsxs)(b.Z,{split:"vertical",minSize:200,defaultSize:"50%",style:{height:"calc(100vh - 55px)"},children:[(0,n.jsx)(i.ZP,{language:z,value:H,theme:Pe,options:{fontSize:12,minimap:{enabled:!1},lineNumbersMinChars:3,glyphMargin:!1},onMount:function(s){Y.current=s}}),(0,n.jsx)("pre",{style:{height:"100%",padding:"0 15px"},children:ee})]}),(0,n.jsx)(p.default,{visible:Oe,handleCancel:function(){de(!1)},file:E()({content:Y.current&&Y.current.getValue().replace(/\r\n/g,`
`)},U)}),(0,n.jsx)(g.default,{visible:me,handleCancel:function(){ce(!1)}})]})};y.default=_},98609:function(oe,y,e){e.r(y);var I=e(25359),E=e.n(I),v=e(57213),r=e.n(v),a=e(49811),V=e.n(a),f=e(54306),j=e.n(f),D=e(63313),P=e.n(D),u=e(67393),h=e(9835),b=e(84163),i=e(22159),p=e(35911),g=e(90717),l=e(11527),L=function(M){var o=M.file,m=M.handleCancel,_=M.visible,T=u.Z.useForm(),t=j()(T,1),d=t[0],R=(0,D.useState)(!1),F=j()(R,2),w=F[0],W=F[1],Z=function(){var N=V()(E()().mark(function C(H){var S;return E()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:W(!0),S=r()(r()(r()({},o),H),{},{originFilename:o.title}),p.W.post("".concat(g.Z.apiPrefix,"scripts"),{data:S}).then(function(z){var x=z.code,G=z.data;x===200&&(h.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),m(G)),W(!1)});case 3:case"end":return A.stop()}},C)}));return function(H){return N.apply(this,arguments)}}();return(0,D.useEffect)(function(){d.resetFields(),W(!1)},[o,_]),(0,l.jsx)(b.Z,{title:"\u4FDD\u5B58\u6587\u4EF6",open:_,forceRender:!0,centered:!0,maskClosable:!1,onOk:function(){d.validateFields().then(function(C){Z(C)}).catch(function(C){console.log("Validate Failed:",C)})},onCancel:function(){return m()},confirmLoading:w,children:(0,l.jsxs)(u.Z,{form:d,layout:"vertical",name:"script_modal",initialValues:{filename:o==null?void 0:o.title,path:(o==null?void 0:o.parent)||""},children:[(0,l.jsx)(u.Z.Item,{name:"filename",label:"\u6587\u4EF6\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"}],children:(0,l.jsx)(i.Z,{placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D"})}),(0,l.jsx)(u.Z.Item,{name:"path",label:"\u4FDD\u5B58\u76EE\u5F55",children:(0,l.jsx)(i.Z,{placeholder:"\u8BF7\u8F93\u5165\u4FDD\u5B58\u76EE\u5F55\uFF0C\u9ED8\u8BA4scripts\u76EE\u5F55"})})]})})};y.default=L},75035:function(oe,y,e){e.r(y);var I=e(25359),E=e.n(I),v=e(57213),r=e.n(v),a=e(49811),V=e.n(a),f=e(54306),j=e.n(f),D=e(63313),P=e.n(D),u=e(67393),h=e(9835),b=e(84163),i=e(22159),p=e(35911),g=e(90717),l=e(11527),L=function(M){var o=M.file,m=M.handleCancel,_=M.visible,T=u.Z.useForm(),t=j()(T,1),d=t[0],R=(0,D.useState)(!1),F=j()(R,2),w=F[0],W=F[1],Z=function(){var N=V()(E()().mark(function C(H){var S;return E()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:W(!0),S=r()(r()({},o),H),p.W.post("".concat(g.Z.apiPrefix,"scripts"),{data:S}).then(function(z){var x=z.code,G=z.data;x===200&&(h.ZP.success("\u4FDD\u5B58\u6587\u4EF6\u6210\u529F"),m(G)),W(!1)});case 3:case"end":return A.stop()}},C)}));return function(H){return N.apply(this,arguments)}}();return(0,D.useEffect)(function(){d.resetFields(),W(!1)},[o,_]),(0,l.jsx)(b.Z,{title:"\u8FD0\u884C\u8BBE\u7F6E",open:_,forceRender:!0,centered:!0,onCancel:function(){return m()},children:(0,l.jsx)(u.Z,{form:d,layout:"vertical",name:"setting_modal",initialValues:o,children:(0,l.jsx)(u.Z.Item,{name:"filename",label:"\u5F85\u5F00\u53D1",rules:[{required:!0,message:"\u5F85\u5F00\u53D1"}],children:(0,l.jsx)(i.Z,{placeholder:"\u5F85\u5F00\u53D1"})})})})};y.default=L},74445:function(oe,y,e){e.d(y,{F:function(){return f},e:function(){return V}});var I=e(54306),E=e.n(I),v=e(63313),r=e.n(v),a=e(60001),V=function(){var D=(0,v.useState)("100%"),P=E()(D,2),u=P[0],h=P[1],b=(0,v.useState)(0),i=E()(b,2),p=i[0],g=i[1],l=(0,v.useState)(-48),L=E()(l,2),n=L[0],M=L[1],o=(0,v.useState)(!1),m=E()(o,2),_=m[0],T=m[1],t=(0,v.useMemo)(function(){return(0,a.ZP)()},[]),d=t.platform;return(0,v.useEffect)(function(){d==="mobile"&&document.body.offsetWidth<768?(h("auto"),g(0),M(0),T(!0),document.body.setAttribute("data-mode","phone")):(h("100%"),g(0),M(-48),T(!1),document.body.setAttribute("data-mode","desktop"))},[]),{headerStyle:{padding:"4px 16px 4px 15px",position:"sticky",top:0,left:0,zIndex:20,marginTop:n,width:u,marginLeft:p},isPhone:_}},f=function(){var D=(0,v.useState)(),P=E()(D,2),u=P[0],h=P[1],b=function(){var p=window.matchMedia("(prefers-color-scheme: dark)"),g=localStorage.getItem("qinglong_dark_theme"),l=p.matches&&g!=="light"||g==="dark";h(l?"vs-dark":"vs")};return(0,v.useEffect)(function(){var i=window.matchMedia("(prefers-color-scheme: dark)"),p=localStorage.getItem("qinglong_dark_theme"),g=i.matches&&p!=="light"||p==="dark";h(g?"vs-dark":"vs");var l=function(n){(p==="auto"||!p)&&(n.matches?h("vs-dark"):h("vs"))};typeof i.addEventListener=="function"?i.addEventListener("change",l):typeof i.addListener=="function"&&i.addListener(l)},[]),{theme:u,reloadTheme:b}}},28756:function(oe,y,e){var I=e(87807),E=e(60795),v=e(84875),r=e.n(v),a=e(40804),V=e(92976),f=e(63313),j=e.n(f),D=e(82259),P=e(23474),u=e(7893),h=e(65189),b=e(76737),i=e(16082),p=e(1020),g=e(91967),l=e(60934),L=function(m,_){var T={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&_.indexOf(t)<0&&(T[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,t=Object.getOwnPropertySymbols(m);d<t.length;d++)_.indexOf(t[d])<0&&Object.prototype.propertyIsEnumerable.call(m,t[d])&&(T[t[d]]=m[t[d]]);return T},n="SECRET_COMBOBOX_MODE_DO_NOT_USE",M=function(_,T){var t,d=_.prefixCls,R=_.bordered,F=R===void 0?!0:R,w=_.className,W=_.getPopupContainer,Z=_.dropdownClassName,N=_.popupClassName,C=_.listHeight,H=C===void 0?256:C,S=_.placement,q=_.listItemHeight,A=q===void 0?24:q,z=_.size,x=_.disabled,G=_.notFoundContent,le=_.status,U=_.showArrow,$=L(_,["prefixCls","bordered","className","getPopupContainer","dropdownClassName","popupClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","showArrow"]),X=f.useContext(D.E_),se=X.getPopupContainer,ae=X.getPrefixCls,re=X.renderEmpty,J=X.direction,ie=X.virtual,Oe=X.dropdownMatchSelectWidth,de=f.useContext(h.Z),B=ae("select",d),ue=ae(),me=(0,l.ri)(B,J),ce=me.compactSize,De=me.compactItemClassnames,Q=f.useMemo(function(){var K=$.mode;if(K!=="combobox")return K===n?"combobox":K},[$.mode]),ee=Q==="multiple"||Q==="tags",te=U!==void 0?U:$.loading||!(ee||Q==="combobox"),ne=(0,f.useContext)(b.aM),Pe=ne.status,Y=ne.hasFeedback,ge=ne.isFormItemInput,Ee=ne.feedbackIcon,ve=(0,p.F)(Pe,le),k;G!==void 0?k=G:Q==="combobox"?k=null:k=(re||P.Z)("Select");var _e=(0,g.Z)((0,E.Z)((0,E.Z)({},$),{multiple:ee,hasFeedback:Y,feedbackIcon:Ee,showArrow:te,prefixCls:B})),fe=_e.suffixIcon,he=_e.itemIcon,Ce=_e.removeIcon,Ie=_e.clearIcon,Te=(0,V.Z)($,["suffixIcon","itemIcon"]),ye=r()(N||Z,(0,I.Z)({},"".concat(B,"-dropdown-").concat(J),J==="rtl")),pe=ce||z||de,Me=f.useContext(u.Z),c=x!=null?x:Me,s=r()((t={},(0,I.Z)(t,"".concat(B,"-lg"),pe==="large"),(0,I.Z)(t,"".concat(B,"-sm"),pe==="small"),(0,I.Z)(t,"".concat(B,"-rtl"),J==="rtl"),(0,I.Z)(t,"".concat(B,"-borderless"),!F),(0,I.Z)(t,"".concat(B,"-in-form-item"),ge),t),(0,p.Z)(B,ve,Y),De,w),O=function(){return S!==void 0?S:J==="rtl"?"bottomRight":"bottomLeft"};return f.createElement(a.ZP,(0,E.Z)({ref:T,virtual:ie,dropdownMatchSelectWidth:Oe},Te,{transitionName:(0,i.mL)(ue,(0,i.q0)(S),$.transitionName),listHeight:H,listItemHeight:A,mode:Q,prefixCls:B,placement:O(),direction:J,inputIcon:fe,menuItemSelectedIcon:he,removeIcon:Ce,clearIcon:Ie,notFoundContent:k,className:s,getPopupContainer:W||se,dropdownClassName:ye,showArrow:Y||U,disabled:c}))},o=f.forwardRef(M);o.SECRET_COMBOBOX_MODE_DO_NOT_USE=n,o.Option=a.Wx,o.OptGroup=a.Xo,y.Z=o}}]);
